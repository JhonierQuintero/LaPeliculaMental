@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap');

        :root{
            --bg-gradient: linear-gradient(135deg, #e0eafc 0%, #cfdef3 100%);
            --text-color: #1a202c;
            --primary-color: #4A90E2;
            --primary-gradient: linear-gradient(90deg, #4A90E2 0%, #58AFF6 100%);
            --secondary-color: #7B68EE;
            --secondary-gradient: linear-gradient(90deg, #7B68EE 0%, #9370DB 100%);
            --task-bg-color: rgba(255, 255, 255, 0.5);
            --card-bg-color: rgba(255, 255, 255, 0.6);
            --border-color: #d1d8e0;
            --input-bg-color: rgba(255, 255, 255, 0.8);
            --shadow-color: rgba(74, 144, 226, 0.15);
            --bubble-color: rgba(0, 13, 133, 0.521); /* Color de burbuja para temas claros */
            --backdrop-filter: blur(16px) saturate(180%);
            --font-family: 'Poppins', Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
        }
        [data-theme="dark"]{
            --bg-gradient: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            --text-color: #e2e8f0;
            --primary-color: #60a5fa;
            --primary-gradient: linear-gradient(90deg, #3b82f6 0%, #818cf8 100%);
            --secondary-color: #a78bfa;
            --secondary-gradient: linear-gradient(90deg, #a78bfa 0%, #c4b5fd 100%);
            --task-bg-color: rgba(30, 41, 59, 0.8);
            --card-bg-color: rgba(30, 41, 59, 0.6);
            --border-color: #334155;
            --input-bg-color: #1e293b;
            --shadow-color: rgba(0, 0, 0, 0.4);
            --bubble-color: rgba(255, 255, 255, 0.384); /* Color de burbuja para tema oscuro */
        }
        [data-theme="warm"]{
            --bg-gradient: linear-gradient(135deg, #fffbeb 0%, #fde68a 100%);
            --text-color: #92400e;
            --primary-color: #f59e0b;
            --primary-gradient: linear-gradient(90deg, #fbbf24 0%, #f59e0b 100%);
            --secondary-color: #ea580c;
            --secondary-gradient: linear-gradient(90deg, #ea580c 0%, #f97316 100%);
            --task-bg-color: rgba(255, 251, 235, 0.7);
            --card-bg-color: rgba(255, 255, 255, 0.65);
            --border-color: #fcd34d;
            --input-bg-color: #fffbeb;
            --shadow-color: rgba(245, 158, 11, 0.2);
            --bubble-color: rgba(122, 44, 10, 0.397);
        }
        [data-theme="cold"]{
            --bg-gradient: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            --text-color: #0c4a6e;
            --primary-color: #0ea5e9;
            --primary-gradient: linear-gradient(90deg, #38bdf8 0%, #0ea5e9 100%);
            --secondary-color: #0891b2;
            --secondary-gradient: linear-gradient(90deg, #0891b2 0%, #06b6d4 100%);
            --task-bg-color: rgba(240, 249, 255, 0.8);
            --card-bg-color: rgba(255, 255, 255, 0.6);
            --border-color: #bae6fd;
            --input-bg-color: #f0f9ff;
            --shadow-color: rgba(14, 165, 233, 0.15);
            --bubble-color: rgba(5, 116, 180, 0.705);
        }

        *{box-sizing:border-box;margin:0;padding:0}
        html{scroll-behavior:smooth}
        body{
            font-family: var(--font-family);
            background-image: var(--bg-gradient);
            background-attachment: fixed;
            color: var(--text-color);
            min-height: 100vh;
            line-height: 1.7;
            -webkit-font-smoothing: antialiased;
            transition: background-color 0.3s ease, color 0.3s ease;
            overflow-x: hidden;
            position: relative;
        }
        
        .bubbles-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
        }
        .bubble {
            position: absolute;
            bottom: -150px;
            background-color: var(--bubble-color); /* Color adaptable! */
            border-radius: 50%;
            animation: floatUp 25s infinite ease-in;
            will-change: transform, opacity;
        }
        @keyframes floatUp {
            0% {
                transform: translateY(0);
                opacity: 1;
            }
            100% {
                transform: translateY(-120vh);
                opacity: 0;
            }
        }


        .container{max-width:980px;margin:0 auto;padding:3rem 1.5rem; position: relative; z-index: 1;}
        .screen{display:none}
        .screen.active{display:block;animation:fadeIn .5s ease-in-out}
        @keyframes fadeIn{from{opacity:0;transform:translateY(15px)}to{opacity:1;transform:none}}

        h1,h2,h3{
            font-weight: 800;
            margin-bottom: 1rem;
            line-height: 1.2;
            letter-spacing: -0.5px;
            text-align: center;
        }
        h1{font-size:clamp(2.2rem, 5vw, 3.5rem); text-shadow: 1px 1px 3px var(--shadow-color);}
        h2{font-size:clamp(1.8rem, 4vw, 2.5rem);}
        h3{font-size:clamp(1.2rem, 3vw, 1.5rem); font-weight: 700;}
        .muted{opacity:.8;font-size: 1rem; text-align: center; display: block;}
        
        .quote {
            font-style: italic;
            text-align: center;
            margin: 1.5rem auto;
            max-width: 600px;
            opacity: 0.9;
            font-size: 1.05rem;
        }
        .quote::before { content: '“'; }
        .quote::after { content: '”'; }


        button{
            background-image: var(--primary-gradient);
            color: white;
            border: none;
            padding: 1rem 1.75rem;
            border-radius: 999px;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: 0 10px 25px -5px var(--shadow-color), 0 8px 10px -6px var(--shadow-color);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        button:hover{transform:translateY(-3px); box-shadow: 0 12px 30px -5px var(--shadow-color), 0 10px 15px -6px var(--shadow-color);}
        button:active{transform:translateY(-1px)}
        button.secondary{background-image: var(--secondary-gradient)}
        button.danger{background-image:linear-gradient(90deg, #e53e3e, #f56565)}

        .card{
            background: var(--card-bg-color);
            border-radius: 24px;
            padding: 2.5rem;
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
            backdrop-filter: var(--backdrop-filter);
            box-shadow: 0 20px 50px -10px var(--shadow-color);
            animation: floatCard 8s infinite alternate ease-in-out;
            will-change: transform;
        }
        @keyframes floatCard {
            from { transform: translateY(-5px); }
            to { transform: translateY(5px); }
        }


        .info-list {
            list-style: none;
            padding: 0;
            margin: 0;
            text-align: center;
            display: grid;
            gap: 2rem;
        }
        .info-list li strong {
            display: block;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }
        .info-list li span {
            font-size: 1.5rem;
            font-weight: 700;
            opacity: 1;
        }

        label{display:block;margin-bottom:.5rem;font-weight:600; font-size: 1.05rem; text-align: left;}
        input[type="text"],input[type="number"],textarea,select,input[type="file"],input[type="date"]{
            width:100%;
            padding: 1rem;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            background: var(--input-bg-color);
            color: var(--text-color);
            font-size: 1rem;
            font-family: var(--font-family);
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }
        input[type="text"]:focus, input[type="number"]:focus, textarea:focus, select:focus, input[type="date"]:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px var(--shadow-color);
        }
        textarea{resize:vertical;min-height:100px;max-height:280px}
        .form-row{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}
        .form-group{margin-bottom:1.5rem}

        .image-previews, #movie-image-gallery{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:1rem;margin-top:1rem; place-items: center;}
        .image-previews img, #movie-image-gallery img{width:100%;height:100px;object-fit:cover;border-radius:12px;cursor:pointer;transition:transform .2s ease, box-shadow .2s ease; border: 2px solid transparent;}
        .image-previews img:hover, #movie-image-gallery img:hover{transform:scale(1.05); box-shadow: 0 8px 20px var(--shadow-color); border-color: var(--primary-color);}

        #task-list{list-style:none;padding:0; display: flex; flex-direction: column; gap: 0.75rem;}
        #task-list li{
            display:flex;
            align-items:center;
            gap:1rem;
            padding: 1rem;
            border: none;
            background-color: var(--task-bg-color);
            border-radius: 12px;
            box-shadow: 0 4px 6px var(--shadow-color);
            transition: opacity 0.3s ease;
        }
        #task-list li.completed{opacity: 0.6;}
        #task-list li.completed .task-text{text-decoration:line-through}
        .task-text{flex:1; text-align: left;}
        .delete-task{background:none;border:none;color:#ef4444;font-size:1.3rem;cursor:pointer;padding:.2rem; transition: transform 0.2s ease;}
        .delete-task:hover { transform: scale(1.2); }
        #new-task-form{display:flex;gap:.8rem;margin-top:1.5rem}
        #new-task-input{flex:1}

        #progress-bar-container{background: var(--input-bg-color);height:16px;border-radius:999px;overflow:hidden;margin-top:1rem; border: 1px solid var(--border-color);}
        #progress-bar{height:100%;width:0;transition:width .5s cubic-bezier(0.25, 1, 0.5, 1);background-image:var(--primary-gradient)}

        .movie-header{text-align:center;margin-bottom:2rem}
        #movie-title{font-weight:800}
        #movie-description{margin-top:.8rem;font-size:1.1rem;max-width:820px;margin-left:auto;margin-right:auto}

        .theme-switcher{position:fixed;top:1.5rem;right:1.5rem;z-index:1000}
        .theme-switcher select {
            padding: 0.5rem 1rem;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            background: var(--input-bg-color);
            box-shadow: 0 5px 15px var(--shadow-color);
            cursor: pointer;
        }
        .controls-panel{display:flex;gap:1rem;flex-wrap:wrap;justify-content:center;margin-top:2rem}

        .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.7);z-index:120; backdrop-filter: blur(5px);}
        .modal.active{display:flex; animation: fadeIn 0.3s ease;}
        .modal img{max-width:90vw;max-height:90vh;border-radius:16px; box-shadow: 0 0 50px rgba(0,0,0,0.5);}
        
        .footer-quote {
            text-align: center;
            padding: 3rem 1.5rem;
            font-size: 1.1rem;
            font-weight: 600;
            opacity: 0.8;
            position: relative;
            z-index: 1;
        }

        /* --- ESTILOS PARA EL CARRUSEL DE LA PELÍCULA --- */
        #carousel-overlay {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            opacity: 0;
            transition: opacity 0.4s ease;
        }
        #carousel-overlay.active {
            display: flex;
            opacity: 1;
        }
        .carousel-container {
            position: relative;
            width: 90vw;
            height: 90vh;
            max-width: 1200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .carousel-slide {
            display: none;
            width: 100%;
            height: 100%;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            text-align: center;
            color: white;
            padding: 2rem;
            animation: fadeIn 0.8s ease;
        }
        .carousel-slide.active {
            display: flex;
        }
        .carousel-slide img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 16px;
        }
        .carousel-slide .slide-title {
            font-size: clamp(1.5rem, 3vw, 2.2rem);
            font-weight: 400;
            margin-bottom: 1.5rem;
            opacity: 0.8;
            color: var(--primary-color);
        }
        .carousel-slide .slide-content {
            font-size: clamp(1.8rem, 4vw, 3.5rem);
            font-weight: 700;
            line-height: 1.3;
        }
        .carousel-quote-slide h2 {
            font-size: clamp(1.8rem, 4vw, 3rem);
            margin-bottom: 1.5rem;
            color: var(--primary-color);
        }
        .carousel-quote-slide p {
            font-size: clamp(1.2rem, 3vw, 1.8rem);
            font-style: italic;
        }
        .carousel-nav {
            /* Ocultamos las flechas ya que es automático */
            display: none; 
        }
        #carousel-close {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            background: none;
            border: none;
            color: white;
            font-size: 2.5rem;
            cursor: pointer;
            z-index: 2001;
            padding: 0;
            line-height: 1;
        }
        /* --- NUEVOS ESTILOS PARA EDICIÓN Y REFLEXIONES --- */

/* Contenedor para los nuevos botones de "Cambiar Música" y "Añadir Imágenes" */
.edit-controls {
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--border-color);
    text-align: center;
}

/* Estilo para los botones de edición. Sutiles y pequeños. */
.edit-button {
    background-image: var(--secondary-gradient);
    padding: 0.6rem 1.2rem;
    font-size: 0.9rem;
    font-weight: 600;
    border-radius: 8px;
    box-shadow: 0 4px 10px -2px var(--shadow-color);
}

/* Escondemos los inputs de archivo, ya que los activamos con los botones */
.hidden-input {
    display: none;
}

/* Estilo para la caja que mostrará la reflexión */
.reflection-box {
    margin-top: 2rem;
    padding: 1.5rem;
    min-height: 100px;
    background-color: var(--task-bg-color);
    border-radius: 12px;
    border-left: 5px solid var(--primary-color);
    font-style: italic;
    color: var(--text-color);
    opacity: 0.9;
    transition: all 0.4s ease;
}
/* --- ESTILOS PARA OPCIONES PREDETERMINADAS --- */
.preset-title {
    font-size: 1rem;
    font-weight: 600;
    text-align: left;
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
    opacity: 0.8;
}

.preset-audio-options {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
}

.preset-audio-btn {
    background: var(--input-bg-color);
    border: 2px solid var(--border-color);
    color: var(--text-color);
    padding: 0.5rem 1rem;
    font-size: 0.9rem;
    font-weight: 600;
    border-radius: 999px;
    box-shadow: none;
    text-transform: none;
    transition: all 0.2s ease;
}

.preset-audio-btn.selected {
    background-image: var(--primary-gradient);
    border-color: transparent;
    color: white;
    transform: scale(1.05);
}

.preset-image-gallery {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: 0.75rem;
    margin-bottom: 1rem;
}

.preset-image-gallery img {
    width: 100%;
    height: 80px;
    object-fit: cover;
    border-radius: 12px;
    cursor: pointer;
    border: 3px solid transparent;
    transition: all 0.2s ease;
    opacity: 0.7;
}

.preset-image-gallery img:hover {
    opacity: 1;
    transform: scale(1.05);
}

.preset-image-gallery img.selected {
    border-color: var(--primary-color);
    opacity: 1;
    transform: scale(1.05);
}

/* --- ESTILOS PARA EL LOGRO DESBLOQUEADO --- */
.achievement-overlay {
    position: fixed;
    inset: 0;
    background-color: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(8px);
    z-index: 3000;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.4s ease, visibility 0.4s ease;
}

.achievement-overlay.active {
    opacity: 1;
    visibility: visible;
}

.achievement-content {
    text-align: center;
    color: white;
    animation: zoomInFade 0.5s ease-out forwards;
}

#achievement-title {
    font-size: clamp(2.5rem, 6vw, 4rem);
    color: #ffd700; /* Color dorado */
    text-shadow: 0 0 15px rgba(255, 215, 0, 0.7);
}

#achievement-text {
    font-size: 1.2rem;
    max-width: 400px;
    margin-top: 1rem;
}

@keyframes zoomInFade {
    from {
        opacity: 0;
        transform: scale(0.5);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

#vision-card-template {
    position: absolute;
    left: -9999px;
    top: 0;
    
    width: 1080px; /* Tamaño cuadrado tipo post de Instagram */
    height: 1080px;
    font-family: 'Poppins', sans-serif;
    overflow: hidden; /* Asegura que nada se salga de los bordes */
    position: relative; /* Clave para superponer elementos */
}

/* Capa 1: La imagen de fondo */
#vision-card-template #card-bg-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover; /* Rellena el espacio sin deformar la imagen */
    z-index: 1;
}

/* Capa 2: El velo oscuro para la legibilidad */
#vision-card-template #card-overlay {
    position: absolute;
    inset: 0; /* Abarca todo el contenedor (top, bottom, left, right: 0) */
    background: linear-gradient(180deg, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0.7) 100%);
    z-index: 2;
}

/* Capa 3: El contenido de texto */
#vision-card-template #card-content {
    position: relative;
    z-index: 3;
    color: #ffffff;
    padding: 80px;
    box-sizing: border-box;
    height: 100%;
    display: flex;
    flex-direction: column;
    text-shadow: 0 2px 8px rgba(0,0,0,0.5); /* Sombra para todo el texto */
}

#vision-card-template .card-header {
    text-align: left;
}

#vision-card-template .card-header h2 {
    font-size: 110px;
    line-height: 1;
    margin: 0;
}

#vision-card-template .card-main {
    flex-grow: 1; /* Empuja el footer hacia abajo */
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
}

#vision-card-template .card-main p {
    font-size: 52px;
    font-style: italic;
    font-weight: 400;
    line-height: 1.4;
}

#vision-card-template .card-footer {
    text-align: center;
    font-size: 24px;
    opacity: 0.8;
}

#vision-card-template .card-footer .creator {
    font-weight: 700;
}

#vision-card-template .card-footer .app-name {
    font-weight: 400;
}

/* --- ESTILOS PARA TAREAS MEJORADAS --- */
#task-list li {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.5rem; /* Espacio entre la tarea principal y los detalles */
}

.task-main {
    display: flex;
    align-items: center;
    width: 100%;
}

.task-details {
    padding-left: 2.5rem; /* Alineado con el texto de la tarea, después del checkbox */
    font-size: 0.9rem;
    opacity: 0.8;
    width: 100%;
}

.task-due-date {
    font-weight: 600;
    margin-right: 1rem;
    color: var(--secondary-color);
}

.task-due-date.overdue {
    color: #e53e3e; /* Rojo para fechas vencidas */
    font-weight: 700;
}

.task-notes {
    display: block; /* Asegura que las notas aparezcan debajo de la fecha */
    margin-top: 0.25rem;
    font-style: italic;
}

/* --- ESTILOS CORREGIDOS PARA TAREAS MEJORADAS Y SU FORMULARIO --- */

/* 1. Estilos para la lista de tareas (sin cambios, pero lo incluyo por contexto) */
#task-list li {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.5rem;
}
.task-main {
    display: flex;
    align-items: center;
    width: 100%;
}
.task-details {
    padding-left: 2.5rem;
    font-size: 0.9rem;
    opacity: 0.8;
    width: 100%;
}
.task-due-date {
    font-weight: 600;
    margin-right: 1rem;
    color: var(--secondary-color);
}
.task-due-date.overdue {
    color: #e53e3e;
    font-weight: 700;
}
.task-notes {
    display: block;
    margin-top: 0.25rem;
    font-style: italic;
}

/* 2. CORRECCIONES PARA EL FORMULARIO DE NUEVA TAREA */
#new-task-form {
    display: flex;
    flex-direction: column; /* Apila los elementos verticalmente */
    gap: 1rem; /* Espacio entre el input principal, la fila de fecha/notas y el botón */
}

/* El contenedor de "Tu Nombre" y "Tu Edad" en el formulario principal */
.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
}

/* Usamos una clase específica para la fila de fecha/notas para no interferir */
#new-task-form .task-form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}

#new-task-form .form-group {
    margin-bottom: 0; /* Quitamos el margen inferior para que el 'gap' del form lo controle */
}

/* La corrección clave: le damos un tamaño fijo al botón y lo alineamos */
#new-task-form button[type="submit"] {
    width: auto; /* El botón toma el tamaño de su contenido */
    align-self: flex-end; /* Lo alineamos a la derecha del formulario */
    margin-top: 0.5rem; /* Pequeño espacio superior */
}

#task-list input[type="checkbox"] {
    transform: scale(1.5); /* Lo hace un 50% más grande */
    cursor: pointer;
}

.task-main {
    gap: 1rem; 
}

/* En pantallas pequeñas, hacemos que la fecha y las notas se pongan una encima de la otra */
@media (max-width: 500px) {
    #new-task-form .task-form-row {
        grid-template-columns: 1fr; /* Una sola columna */
    }
}


        @media print{
            .bubbles-container { display: none; }
            body{background:white;color:black; font-family: 'Times New Roman', serif;}
            .no-print{display:none !important}
            .card{box-shadow:none;border:1px solid #ccc;background:transparent; padding: 1.5rem; animation: none;}
            .container { padding: 0; }
        }

        @media(max-width:768px){
            .form-row{grid-template-columns:1fr}
            .container{padding:2rem 1rem}
            .card{padding: 1.5rem; animation: none;}
            h1 { font-size: 2rem; }
            h2 { font-size: 1.6rem; }
            button { padding: 0.8rem 1.2rem; font-size: 0.9rem;}
            .theme-switcher { top: 1rem; right: 1rem; }
            .info-list li span { font-size: 1.2rem; }
            #carousel-close { top: 1rem; right: 1rem; font-size: 2rem; }
        }